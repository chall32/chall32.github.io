---
comments: true
layout: post
title: Android Market Fingerprints Demystified
date: '2010-06-29T15:29:00.003+01:00'
tags:
- Andriod
modified_time: '2010-07-27T21:48:50.661+01:00'
thumbnail: http://1.bp.blogspot.com/_2xKZgKYJlJs/TBFOB-j-3vI/AAAAAAAAAkU/-z6a8Jh3Ogc/s72-c/Android+Market.jpg
blogger_id: tag:blogger.com,1999:blog-1308168280960455064.post-6218177956895271296
blogger_orig_url: http://chall32.blogspot.com/2010/06/android-market-fingerprints-demystified.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_2xKZgKYJlJs/TBFOB-j-3vI/AAAAAAAAAkU/-z6a8Jh3Ogc/s1600/Android+Market.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img height="200" src="http://1.bp.blogspot.com/_2xKZgKYJlJs/TBFOB-j-3vI/AAAAAAAAAkU/-z6a8Jh3Ogc/s200/Android+Market.jpg" style="border-style: none;" width="200" /></a></div>Like it or not smartphone applications ("apps") are here to stay.<br /><br />Lets face it, we all like to have that "wizzy" app that allows us to do this or that, or displays certain data in a certain way.<br /><br />&nbsp;- iPhone has App Store<br />&nbsp;- Android has Android Market<br /><ul></ul>Both have tens of thousands apps available to download.&nbsp; But how do you ensure that your patrons are installing apps that are not going to adversely affect their end user experience?<br /><br />Say hello to the Android build fingerprint.<br /><br />It is this build fingerprint that ultimately governs the exact number  of apps available to the end user via the Android market.<br /><br />However, the Android fingerprint system is not without it's faults.&nbsp; The most common fault being that apps appear to be "missing" from the market, meaning that they are not available to install.&nbsp; These issues are typically seen when either (a) a new handset is released or (b) when an existing handset receives an android version upgrade. &nbsp; <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_2xKZgKYJlJs/TCE7r9p3FXI/AAAAAAAAAkc/gWdn1jyRxgQ/s1600/t-mobile-pulse-1.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img height="178" src="http://2.bp.blogspot.com/_2xKZgKYJlJs/TCE7r9p3FXI/AAAAAAAAAkc/gWdn1jyRxgQ/s200/t-mobile-pulse-1.jpg" style="border-style: none;" width="200" /></a></div>It just so happens that my T-Mobile Pulse - aka Huawei U8220 - recently received an Android 2.1 upgrade released by T-Mobile in Hungary  (yeah I know.&nbsp; Hungary?!? what the.....?) <a href="http://translate.google.com/translate?js=y&amp;prev=_t&amp;hl=en&amp;ie=UTF-8&amp;layout=1&amp;eotf=1&amp;u=http://www.t-mobile.hu/lakossagi/keszulekek/szoftverfrissites/telefon/pulse_21&amp;sl=hu&amp;tl=en" target="_blank">here</a>.<br /><br />It was after installing this update that my personal dealings with "missing" market applications started.<br /><br />It turns out that the Android Fingerprint included in the Hungarian update was not as it should have been.<br /><br />So, lets look at the  Android fingerprint closer.&nbsp; Namely:<br /><ol><li>How Android fingerprints   are derived</li><li>What makes a good fingerprint with lots of market apps  available to  the user </li></ol><br /><span style="font-size: large;"><b>Fingerprint Location, Editing and An Example Fingerprint</b></span><br />Fingerprints live in the /system/build.prop file on any Android phone.<br /><br />There are several to look at and modify your build.prop file.&nbsp; Perhaps the easiest is to use an app like Estrongs <a href="http://www.estrongs.com/en/products/file-explorer.html">File Explorer</a> to open and edit build.prop.&nbsp; An alternative way is to use <a href="http://developer.android.com/guide/developing/tools/adb.html">Android Debug Bridge</a> or adb as it is known.<br /><br />Here is an example fingerprint:<br /><blockquote><i>ro.build.fingerprint=htc_wwe/htc_legend/legend/legend:2.1/ERD79/139791:user/release-keys</i></blockquote><br /><span style="font-size: large;"><b>How are fingerprints derived?</b></span><br /><div class="separator" style="clear: both; text-align: left;">Being that Android is open, the information on deriving fingerprints is out there, the killer is finding it!</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">After some searching I eventually stumbled on this <a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en//compatibility/android-2.1-cdd.pdf">PDF</a> which states:</div><br /><blockquote><b>android.os.Build.FINGERPRINT:</b><br />A string that uniquely  identifies this build. It SHOULD be reasonably human-readable. It  MUST follow this template:<br /><br /><b>$(BRAND)/$(PRODUCT)/$(DEVICE)/$(BOARD):$(VERSION.RELEASE)/$(ID)/$(VERSION.INCREMENTAL):$(TYPE)/$(TAGS)</b><br /><br />For  example:<br />acme/mydevice/generic/generic:2.1-update1/ERC77/3359:userdebug/test-keys<br /><br />The  fingerprint MUST NOT include spaces. If other fields included in the  template above have spaces, they SHOULD be replaced with the ASCII  underscore ("_") character in the fingerprint.</blockquote><br />Breaking this down then:<br /><blockquote><b>(BRAND)</b><br />A value chosen by the device implementer identifying the name of the company, organization, individual, etc. who produced the device, in human-readable format. A possible use of this field is to indicate the OEM and/or carrier who sold the device. There are no requirements on the specific format of this field, except that it MUST NOT be null or the empty string ("").</blockquote><br /><blockquote><b>(PRODUCT)</b><br />A value chosen by the device implementer containing the development name or code name of the device. MUST be human-readable, but is not necessarily intended for view by end users. There are no requirements on the specific format of this field, except that it MUST NOT be null or the empty string ("").</blockquote><br /><blockquote><b>(DEVICE)</b><br />A value chosen by the device implementer identifying the specific configuration or revision of the body (sometimes called "industrial design")of the device. There are no requirements on the specific format of this field, except that it MUST NOT be null or the empty string ("").</blockquote><br /><blockquote><b>(BOARD)</b><br />A value chosen by the device implementer identifying the specific internal hardware used by the device, in human-readable format. A possible use of this field is to indicate the specific revision of the board powering the device. There are no requirements on the specific format of this field, except<br />that it MUST NOT be null or the empty string ("").</blockquote><br /><blockquote><b>(VERSION.RELEASE)</b><br />The version of the currently-executing Android system, in human-readable format. This field MUST have one of the string values defined in Android 2.1 allowed version strings: <a href="http://source.android.com/compatibility/2.1/versions.html" target="_blank">http://source.android.com/compatibility/2.1/versions.html</a></blockquote><br /><blockquote><b>(ID)</b><br />An identifier chosen by the device implementer to refer to a specific release, in human readable format. This field can be the same as android.os.Build.VERSION.INCREMENTAL, but SHOULD be a value sufficiently meaningful for end users to distinguish between software builds. There are no requirements on the specific format of this field, except that it MUST NOT be<br />null or the empty string ("").</blockquote><br /><blockquote><b>(VERSION.INCREMENTAL)</b><br />A value chosen by the device implementer designating the specific build of the currently-executing Android system, in human-readable format. This value MUST NOT be re-used for different builds shipped to end users. A typical use of this field is to indicate which build number or source-control change identifier was used to generate the build. There are no requirements on the specific format of this field, except that it MUST NOT be null or the empty string ("").</blockquote><br /><blockquote><b>(TAGS)</b><br />A comma-separated list of tags chosen by the device implementer that further distinguish the build. For example, "unsigned,debug". This field MUST NOT be null or the empty string (""), but a single tag (such as "release") is fine.</blockquote><br />Phew!<br /><br />To understand this better, lets say:<br /><ul><li>I go into business called CHPhones and produce a nice shiny handset called a CH1, running Android 2.1 update 1.</li><li>My CH1 is based on the ZZZ chipset</li><li>I've singed an exclusivity contract with BTCellnet for the CH1</li><li>I'm creating the android 2.1 build version 0001 today - 29/June/2010</li></ul>Using the template from the PDF, <br /><blockquote>$(BRAND)/$(PRODUCT)/$(DEVICE)/$(BOARD):$(VERSION.RELEASE)/$(ID)/$(VERSION.INCREMENTAL):$(TYPE)/$(TAGS)</blockquote><br />my  build fingerprint would be:<br /><blockquote>BTCellnet/CHPhones/CH1/ZZZ:2.1-update1/0001/09062010:user/release-keys</blockquote><br />And  there you go, a nice specific fingerprint for use on the market.<br /><br />My  next step would be to register this brand new fingerprint 'behind the  scenes' with Google - possibly through <a href="http://www.openhandsetalliance.com/" target="_blank">Open Hand Set Alliance</a>, maybe a bit of testing and there we go, one live fingerprint.<br /><a href="http://4.bp.blogspot.com/_2xKZgKYJlJs/TBFMx7stLlI/AAAAAAAAAkM/Xvbx0F_pMM4/s1600/snap20100610_212205.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="http://4.bp.blogspot.com/_2xKZgKYJlJs/TBFMx7stLlI/AAAAAAAAAkM/Xvbx0F_pMM4/s200/snap20100610_212205.png" width="133" /></a><br />There is no smoke &amp; mirror "magic code" embedded  in the fingerprint.  The fingerprint really is he sum of the total of  it's parts; it only works as a whole.  <span style="color: red;">Make any changes to any  part of the registered fingerprint and it stops working.</span>&nbsp; End of.<br /><br />As the fingerprint can quite literally be  anything you want, the killer is that the whole fingerprint needs to be  registered with Google / Open Handset Alliance  to ensure that the end  user indeed has a compatible handset with those additional applications  that potentially need it.  <br /><br />And there in lies the rub.<br /><br />Yes  we can use a different fingerprint to "trick the market" into allowing  us to install additional applications that have not been specifically  tested against our fingerprint (and hence our hardware and specific  Android build) but we are potentially opening ourselves up to issues because of this.<br /><br />Food for  thought, next time you get an Android force close / crash / reboot.<br /><br />- Chris<div class="blogger-post-footer"><p>

