---
comments: true
layout: post
title: ! 'Reminder: Win2008R2 SQL Clustering'
date: '2011-02-23T09:00:00.002Z'
tags:
- Reminder
modified_time: '2011-02-23T09:00:01.172Z'
thumbnail: http://2.bp.blogspot.com/-ecDFdik2ym8/TVQLPSg8j3I/AAAAAAAAAwk/hlcapwBC38o/s72-c/clusternuts.png
blogger_id: tag:blogger.com,1999:blog-1308168280960455064.post-5288193535402158197
blogger_orig_url: http://chall32.blogspot.com/2011/02/reminder-win2008r2-sql-clustering.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-ecDFdik2ym8/TVQLPSg8j3I/AAAAAAAAAwk/hlcapwBC38o/s1600/clusternuts.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="200" src="http://2.bp.blogspot.com/-ecDFdik2ym8/TVQLPSg8j3I/AAAAAAAAAwk/hlcapwBC38o/s200/clusternuts.png" width="185" /></a></div><br /><br />Yet another reminder / quick fire how to post.&nbsp; This time Windows 2008 R2 Clustering ready for a clustered SQL install.<br /><br />In it's latest guise, Windows 2008 and 2008 R2 clustering is completely different beast from a Windows 2000 or 2003 cluster.&nbsp; <br /><br />For full details of what's new in 2008 Clustering, have a look at <a href="http://technet.microsoft.com/en-us/library/cc770625%28WS.10%29.aspx" target="_blank">this</a> technet library article.<br /><br /><br /><br /><br /><br /><b><span style="font-size: large;">Pre-Requisites</span></b><br />So you need to build a cluster? OK.&nbsp; Here is what you need:<br /><br /><ul><li>Some shared storage (SAN / NAS / ISCSI etc) to hold data that is to be hosted by cluster</li><li>Small shared storage for Quorum Disk (MS <a href="http://support.microsoft.com/kb/280345" target="_blank">KB208345</a> states minimum 500Mb for Quorum)</li><li>A hostname and IP address for the Cluster</li><li>A hostname and IP address for each MSDTC instance</li><li>A hostname and IP address for each SQL instance</li></ul><br />SQL Cluster will require individual per instance shared storage areas for:<br /><br /><ul><li>SQL Data</li><li>SQL Transaction Logs</li><li>SQL Database Backups</li><li>MSDTC (Again a minimum of 500Mb should be fine)</li></ul><br /><br /><b><span style="font-size: large;">How to Configure</span></b> <br />A movie tells more than a thousand words.&nbsp; Here is how to create a Windows 2008 / 2008 R2 cluster and how to get around some of the more common problems:<br /><br /><div style="text-align: center;"><iframe allowfullscreen="" frameborder="0" height="510" src="http://www.youtube.com/embed/TmyFEMXm52g?rel=0" title="YouTube video player" width="640"></iframe></div><div style="text-align: right;"><span style="font-size: x-small;">Thanks to <a href="http://eniackb.blogspot.com/" target="_blank">eniackb.blogspot.com</a> for putting this together</span></div><br /><span style="font-size: large;"><b>Getting SQL and 2008 Failover Clustering to Play Together Nicely</b></span><br />The following is taken from <a href="http://blogs.msdn.com/b/sqlserverfaq/archive/2009/10/08/receive-a-warning-about-the-network-binding-order-on-the-setup-support-rules-page-when-install-sql-server-2008-in-a-failover-cluster.aspx" target="_blank">this MSDN blog post</a>:<br /><br />While installing SQL Server 2008 the DBA will face following warning in the installation window:<br /><div style="color: red;"><br /></div><div style="color: red;">Receive a warning about the network binding order on the Setup Support Rules page when  install SQL Server 2008 in a failover cluster</div><br />This is because the domain / production network card is not the first bound network card. This will cause domain operations to run slowly and can cause timeouts that result in failures. <br /><br />Use the command to enumerate network card GUID's:<br /><br /><blockquote style="font-family: &quot;Courier New&quot;,Courier,monospace;">wmic nicconfig get description, SettingID &gt; C:\nicconfig.txt</blockquote>Open C:\nicconfig.txt and regedit to the following key:<br /><br /><b>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\Tcpip\Linkage\Bind</b><br /><br />Cut and paste GUID's so that production network card (or NIC team) is at the to of the list.&nbsp; Save key and confirm binding is correct via ipconfig/all.<br /><br />Ready for SQL install!<br /><br />- Chris<div class="blogger-post-footer"><p>

