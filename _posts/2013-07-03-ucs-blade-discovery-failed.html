---
layout: post
title: UCS Blade Discovery Failed
date: '2013-07-03T17:43:00.001+01:00'
tags:
- Cisco
modified_time: '2013-07-03T17:52:36.381+01:00'
thumbnail: http://2.bp.blogspot.com/-bVmj-z3-x7o/UdQyDtCiOTI/AAAAAAAABfM/iDLTFmkVkoY/s72-c/L-F.jpg
blogger_id: tag:blogger.com,1999:blog-1308168280960455064.post-6433871378587196790
blogger_orig_url: http://chall32.blogspot.com/2013/07/ucs-blade-discovery-failed.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-bVmj-z3-x7o/UdQyDtCiOTI/AAAAAAAABfM/iDLTFmkVkoY/s247/L-F.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="165" src="http://2.bp.blogspot.com/-bVmj-z3-x7o/UdQyDtCiOTI/AAAAAAAABfM/iDLTFmkVkoY/s200/L-F.jpg" width="200" /></a></div>A simple job then; lift and shift some Cisco UCS blades from a legacy site to into the Datacentre to help with capacity for consolidation in the Datacentre.<br /><br />Unfortunately a simple job turned into a bit of a nightmare with the destination UCS deciding not to play nicely with the recycled blades.<br /><br />Don't get me wrong here folks, <a href="http://chall32.blogspot.co.uk/2013/02/cisco-ucs-what-the.html" target="_blank">Cisco Unified Computing System</a>&nbsp;is a cool piece of kit that is challenging the way we look at hardware nowadays. &nbsp;It is however not without&nbsp;it's <a href="http://www.thefreedictionary.com/foibles" target="_blank">foibles</a>&nbsp;of which this is just one.<br /><br />Thanks go to <a href="https://twitter.com/brettchannon">@brettchannon</a>&nbsp;and the guys from&nbsp;<a href="https://twitter.com/VCE">@VCE</a>&nbsp;for helping with the solution to this issue.<br /><h3>SYMPTOMS</h3>When you install a Cisco UCS blade that is has 1.x firmware installed into a chassis that is running a 2.x firmware, the following error can be seen:<br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-URUSF7_grmY/UdQkUyunIZI/AAAAAAAABdk/P6YzCi5ICO8/s1020/Fault2.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="228" src="http://3.bp.blogspot.com/-URUSF7_grmY/UdQkUyunIZI/AAAAAAAABdk/P6YzCi5ICO8/s640/Fault2.jpg" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">(Click image for larger view)</td></tr></tbody></table>Code: F1000034<br />Cause: fsm-failed<br />Description: [FSM:FAILED] Blade Discovery (FSM:sam:dme:ComputeBladeDiscover)<br /><br />A re-acknowledge, power cycle, reseat will not allow the blade to be properly discovered. &nbsp;Any firmware upgrades (other than a CIMC firmware upgrade) will remain in a "Scheduled" status.<br /><div class="separator" style="clear: both; text-align: center;"></div><h3>CAUSE</h3><div>USB Legacy mode is set to disabled within the BIOS settings.</div><h3>RESOLUTION</h3>Complete the following resolution on each blade affected:<br /><br />1. &nbsp;Open the KVM console of the affected blade (<b>Equipment Tab &gt; Chassis &gt; Chassis containing affected blade &gt; Servers &gt; Affected Server &gt; KVM Console</b>):<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-wTNIrd1wjTQ/UdQoi0R9KUI/AAAAAAAABd0/fMaV91nezYI/s835/Reset.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="93" src="http://1.bp.blogspot.com/-wTNIrd1wjTQ/UdQoi0R9KUI/AAAAAAAABd0/fMaV91nezYI/s320/Reset.JPG" width="320" /></a></div><br />2. Hit <b>Reset</b>&nbsp;and&nbsp;<b>OK&nbsp;</b>the following warning:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-wrh9FDNCRTU/UdQoyd6Jq9I/AAAAAAAABd8/1lkX5h9e3Cg/s633/ResetOK1.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="85" src="http://1.bp.blogspot.com/-wrh9FDNCRTU/UdQoyd6Jq9I/AAAAAAAABd8/1lkX5h9e3Cg/s320/ResetOK1.JPG" width="320" /></a></div><br />3. Choose <b>Power Cycle</b>&nbsp;and <b>OK </b>the following dialogue:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-KRUt4LjJSmE/UdQpHciHVCI/AAAAAAAABeE/6e5YTEYCpHI/s420/resetOK2.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="273" src="http://3.bp.blogspot.com/-KRUt4LjJSmE/UdQpHciHVCI/AAAAAAAABeE/6e5YTEYCpHI/s320/resetOK2.JPG" width="320" /></a></div><br />4. &nbsp;Hit <b>F2</b> when prompted to enter the blade's BIOS setup:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-2ikABmCMtPM/UdQp1lymjpI/AAAAAAAABeM/JLisbRU1LmI/s528/F2.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="125" src="http://4.bp.blogspot.com/-2ikABmCMtPM/UdQp1lymjpI/AAAAAAAABeM/JLisbRU1LmI/s320/F2.JPG" width="320" /></a></div><br />5. Once in the BIOS setup hit right arrow key to get to <b>Advanced </b>and down arrow to <b>USB Configuration. </b><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-UMNocle-Nyc/UdQqtWLDqxI/AAAAAAAABeY/NYmeHf0yn8Y/s831/m200bios2.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="295" src="http://3.bp.blogspot.com/-UMNocle-Nyc/UdQqtWLDqxI/AAAAAAAABeY/NYmeHf0yn8Y/s320/m200bios2.JPG" width="320" /></a></div><br />6. &nbsp;Hit return to open USB configuration and hit down arrow and return to open&nbsp;<b>Legacy USB Support </b>option:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-zbCz6wX0_cE/UdQrUFO4P5I/AAAAAAAABek/uTNgYXq9vt4/s668/USBDisabled.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="296" src="http://2.bp.blogspot.com/-zbCz6wX0_cE/UdQrUFO4P5I/AAAAAAAABek/uTNgYXq9vt4/s320/USBDisabled.JPG" width="320" /></a></div><br />7. Set Legacy USB Support to <b>Enabled</b>:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-iOB_pJZ_i8A/UdQrzE3iViI/AAAAAAAABes/tlApY_XUsn4/s441/EnableUSB.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="96" src="http://4.bp.blogspot.com/-iOB_pJZ_i8A/UdQrzE3iViI/AAAAAAAABes/tlApY_XUsn4/s320/EnableUSB.JPG" width="320" /></a></div><br />8. Hit Esc and right arrow to select <b>Exit tab </b>and hit return to <b>Save Changes and Exit</b>:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-A7fIhniEogY/UdQtCEKWAbI/AAAAAAAABe8/36wlnyoMucs/s832/m200bios4.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="293" src="http://2.bp.blogspot.com/-A7fIhniEogY/UdQtCEKWAbI/AAAAAAAABe8/36wlnyoMucs/s320/m200bios4.JPG" width="320" /></a></div><br />9. &nbsp;Close the KVM console and allow UCS to rediscover server. If you cannot wait, select&nbsp;<b>Recover&nbsp;Server &gt; Re-acknowledge &gt; OK </b>to force the UCS to rediscover the blade.<br /><h3>MORE INFORMATION</h3><div>I would love to know more about this error and how the USB mode setting within a blade can cause UCS to give up on a that blade altogether. &nbsp;</div><div><br /></div><div>Seems like a crazy simple fix to what - on the face of it - seems a pretty catastrophic error message. All in all we had this issue on 12+ blades and the USB legacy mode fix work on all of them.</div><div><br /></div><div>Godda love UCS.....!</div><div><br /></div><div>- Chris</div><br /><div class="blogger-post-footer"><p>

