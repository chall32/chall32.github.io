---
layout: post
title: Find HBA WWNs from ESXi Console
date: '2011-12-15T10:35:00.000Z'
tags:
- ESXi
- VMware
modified_time: '2011-12-15T10:35:42.422Z'
thumbnail: http://4.bp.blogspot.com/-oC7b7SHdJnY/Tum9MMIwMcI/AAAAAAAAA7s/T_gh2o6afJw/s72-c/HBA.jpg
blogger_id: tag:blogger.com,1999:blog-1308168280960455064.post-4334214076013492332
blogger_orig_url: http://chall32.blogspot.com/2011/12/find-hba-wwns-from-esxi-console.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-oC7b7SHdJnY/Tum9MMIwMcI/AAAAAAAAA7s/T_gh2o6afJw/s1600/HBA.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="200" src="http://4.bp.blogspot.com/-oC7b7SHdJnY/Tum9MMIwMcI/AAAAAAAAA7s/T_gh2o6afJw/s200/HBA.jpg" width="200" /></a></div><br />&nbsp;A question this comes up quite a bit:&nbsp; How can I find the World Wide Names (WWNs) of the fibre channel Host Bus Adapters (HBAs) my ESXi server from the console?<br /><br />Sure you can use the VMware VI client to gather the required info, but what  happens if you do not or have network connectivity to your ESXi yet?&nbsp; <br /><br />The WWN information is very often needed to for the zoning configuration on the fibre channel switches to ensure that the ESXi server can only access the Storage Array Network (SAN) disks it is supposed to access.<br /><br /><br /><br /><br /><b>Here is how to find the HBA WWNs:</b><br /><br />First log on to your ESXi console:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-Ov5RNy8t02g/TunACvmosgI/AAAAAAAAA70/EcsvXIvR6Bs/s1600/hbawwn1.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="241" src="http://3.bp.blogspot.com/-Ov5RNy8t02g/TunACvmosgI/AAAAAAAAA70/EcsvXIvR6Bs/s320/hbawwn1.JPG" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-f3biNKkcNRM/TunAUWX418I/AAAAAAAAA78/GJ9HFwsCwFQ/s1600/hbawwn2.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"></a></div>Now select<b> Troubleshooting Options</b>:<br /><div style="text-align: center;"><a href="http://1.bp.blogspot.com/-f3biNKkcNRM/TunAUWX418I/AAAAAAAAA78/GJ9HFwsCwFQ/s1600/hbawwn2.JPG" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="232" src="http://1.bp.blogspot.com/-f3biNKkcNRM/TunAUWX418I/AAAAAAAAA78/GJ9HFwsCwFQ/s320/hbawwn2.JPG" width="320" /></a></div><br />Then select<b> Enable Local Tech Support</b>:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-37rKIVUcKPc/TunA6T3hcjI/AAAAAAAAA8I/XdIRMwvneJM/s1600/hbawwn3.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="233" src="http://2.bp.blogspot.com/-37rKIVUcKPc/TunA6T3hcjI/AAAAAAAAA8I/XdIRMwvneJM/s320/hbawwn3.JPG" width="320" /></a></div><br />Now press<b> ALT F1</b> to enter local ESXi console:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-HLyG1si5GwY/TunBg_XDlQI/AAAAAAAAA8Q/3Ehw7xc59yk/s1600/hbawwn4.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="77" src="http://2.bp.blogspot.com/-HLyG1si5GwY/TunBg_XDlQI/AAAAAAAAA8Q/3Ehw7xc59yk/s320/hbawwn4.JPG" width="320" /></a></div><br />Login using root credentials:<br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-TnmxSJCg7Xc/TunBq2ZKX4I/AAAAAAAAA8Y/3tdilP7yMlY/s1600/hbawwn5.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="196" src="http://3.bp.blogspot.com/-TnmxSJCg7Xc/TunBq2ZKX4I/AAAAAAAAA8Y/3tdilP7yMlY/s320/hbawwn5.JPG" width="320" /></a></div><br />At the # prompt enter: <b><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">cd /proc/scsi</span></b> and <b><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">ls</span></b> to list the SCSI adaptors fitted in your ESXi:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-pGeRim5vpPY/TunB_HR7NCI/AAAAAAAAA8g/lTSZwsH5Iw4/s1600/hbawwn6.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="217" src="http://1.bp.blogspot.com/-pGeRim5vpPY/TunB_HR7NCI/AAAAAAAAA8g/lTSZwsH5Iw4/s320/hbawwn6.JPG" width="320" /></a></div><br />You are looking for <b>qlaxxxx</b> for QLogic HBAs or <b>lpfc </b>for Emulex HBAs.&nbsp; As you can see from the screenshots, my ESXi has QLogic adapters fitted (qla2xxx).<br /><br />Next, <b><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">cd qla2xxx</span></b> (or <b style="font-family: &quot;Courier New&quot;,Courier,monospace;">cd lpfc</b> for emulex) and then list (ls) adaptors:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-gyJZpyy29qk/TunDvFHaluI/AAAAAAAAA8w/8Ry-tqMHo6E/s1600/hbawwn7.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-gyJZpyy29qk/TunDvFHaluI/AAAAAAAAA8w/8Ry-tqMHo6E/s1600/hbawwn7.JPG" /></a></div><br />As you can see I have adaptors fitted at 5 and 6.&nbsp; Your numbers may (and quite likely will) be different.&nbsp; The last step is to list each of the adaptors found, using the <b>cat x |more </b>("x" being one of the numbers listed) command: <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-qsJPE0kyGLo/TunGzbOWriI/AAAAAAAAA9I/ZF6Sm-NEXzU/s1600/hbawwn7a.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-qsJPE0kyGLo/TunGzbOWriI/AAAAAAAAA9I/ZF6Sm-NEXzU/s1600/hbawwn7a.JPG" /></a></div>&nbsp;You are looking for the <b>Host Device Name</b> and the <b>SCSI Device Information</b>:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-PC06u24AG50/TunL0-jVZKI/AAAAAAAAA9Q/fejB4zxVi5w/s1600/hbawwn8.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="251" src="http://3.bp.blogspot.com/-PC06u24AG50/TunL0-jVZKI/AAAAAAAAA9Q/fejB4zxVi5w/s320/hbawwn8.JPG" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;">&nbsp;<a href="http://3.bp.blogspot.com/-zEd25DGQgao/TunGMeJE30I/AAAAAAAAA9A/pDkUtG4B4qI/s1600/hbawwn9.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="257" src="http://3.bp.blogspot.com/-zEd25DGQgao/TunGMeJE30I/AAAAAAAAA9A/pDkUtG4B4qI/s320/hbawwn9.JPG" width="320" /></a></div><br />OK.&nbsp; To get the full WWN address, simply note down the node and port hex ID's from the SCSI Device Information, and separate each pair with colons ":" to make your full HBA WWN.&nbsp; In my case, from the screenshots above, my HBA WWN would be:<br /><div style="text-align: center;"><b><br /></b></div><div style="text-align: center;"><b> WWN of vmhba2 = 20:00:00:1b:32:8a:f3:42 21:00:00:1b:32:8a:f3:42</b></div><br />Repeat for the last command (cat x |more) for all the other HBA's in your ESXi (so in my case I would run the command <b style="font-family: &quot;Courier New&quot;,Courier,monospace;">cat 6 |more</b> to find the SCSI device information for my other HBA.<br /><br />When finished type <b style="font-family: &quot;Courier New&quot;,Courier,monospace;">exit</b> to return to the ESXi tech support console login and <b>ALT F2</b> to switch back to the standard ESXi console.<br /><br />Don't forget to login, select<b> Troubleshooting Options</b> and <b>Disable Local Tech Support</b> when completely finished!<br /><br />- Chris<div class="blogger-post-footer"><p>

