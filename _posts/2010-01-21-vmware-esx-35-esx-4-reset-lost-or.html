---
comments: true
layout: post
title: VMware ESX 3.5, ESX 4 - Reset Lost or Forgotten root Password
date: '2010-01-21T21:45:00.005Z'
tags:
- VMware
- ESX
modified_time: '2010-01-21T21:54:41.898Z'
thumbnail: http://1.bp.blogspot.com/_2xKZgKYJlJs/S1i-Rt4sMUI/AAAAAAAAAXY/CAyFAvQamZI/s72-c/dontforget.jpg
blogger_id: tag:blogger.com,1999:blog-1308168280960455064.post-218445871750801223
blogger_orig_url: http://chall32.blogspot.com/2010/01/vmware-esx-35-esx-4-reset-lost-or.html
---

<div class="separator" style="clear: both; text-align: left;"><a alt="Forgotten Something?  Pic: KayVee.INC" href="http://1.bp.blogspot.com/_2xKZgKYJlJs/S1i-Rt4sMUI/AAAAAAAAAXY/CAyFAvQamZI/s1600-h/dontforget.jpg" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;" title="Forgotten Something?  Pic: KayVee.INC"><img border="0" src="http://1.bp.blogspot.com/_2xKZgKYJlJs/S1i-Rt4sMUI/AAAAAAAAAXY/CAyFAvQamZI/s200/dontforget.jpg" /></a></div>It happens to us all eventually.<br /><br />Just like anything else, appointments, meetings, conference calls, you name it, wedding anniversaries (especially wedding anniversaries) at some point you are going to forget a password or two.<br /><br />All well and good, most passwords can easily be reset without any real problem.&nbsp; After all what good is a password system that doesn't allow for this oh so regular occurrence?<br /><br />But what happens if you forget the root password to one or more of your VMware ESX servers?&nbsp; Hmm that's not so easy to sort out.&nbsp; Or is it?<br /><br />Yes it's easy to reset, but you are going to need an outage.<br /><br /><b><span style="font-size: large;">How To Reset root Password</span></b><br /><ol><li>Shutdown or migrate all Virtual Machines off of the ESX server in question<br /></li><li> Reboot ESX server and at the grub boot menu screen press a to modify the kernel arguments:</li><div class="separator" style="clear: both; text-align: center;"><a alt="ESX Grub Boot Menu, Press a" href="http://1.bp.blogspot.com/_2xKZgKYJlJs/S1jEGEgO2oI/AAAAAAAAAXo/rlt8DzduNMc/s1600-h/esx-password.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" title="ESX Grub Boot Menu, Press A"><img border="0" src="http://1.bp.blogspot.com/_2xKZgKYJlJs/S1jEGEgO2oI/AAAAAAAAAXo/rlt8DzduNMc/s320/esx-password.png" /></a>             </div><li>At the following screen, enter the word <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">single</span> at the end of the kernel arguments line:</li><div class="separator" style="clear: both; text-align: center;"><a alt="ESX Kernel Arguments. Add the word single" href="http://4.bp.blogspot.com/_2xKZgKYJlJs/S1jEDLdpj2I/AAAAAAAAAXg/HXHXsg3RCAQ/s1600-h/esx-password1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" title="ESX Kernel Arguments. Add the word single"><img border="0" src="http://4.bp.blogspot.com/_2xKZgKYJlJs/S1jEDLdpj2I/AAAAAAAAAXg/HXHXsg3RCAQ/s320/esx-password1.png" /></a>            </div><li>Hit Enter.&nbsp; The ESX server will now boot into a single user environment:</li><div class="separator" style="clear: both; text-align: center;"><a alt="ESX Single User Environment" href="http://1.bp.blogspot.com/_2xKZgKYJlJs/S1jFgq3UQEI/AAAAAAAAAXw/eyZ-64nh5bw/s1600-h/esx-password2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" title="ESX Single User Environment"><img border="0" src="http://1.bp.blogspot.com/_2xKZgKYJlJs/S1jFgq3UQEI/AAAAAAAAAXw/eyZ-64nh5bw/s320/esx-password2.png" /></a>         </div><li>At the # prompt enter <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">passwd</span> This will prompt you to enter a new password for the root user:</li><div class="separator" style="clear: both; text-align: center;"><a alt="root Password Reset!" href="http://2.bp.blogspot.com/_2xKZgKYJlJs/S1jGI50wiwI/AAAAAAAAAX4/oKJTzLOx2bI/s1600-h/esx-password3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" title="root Password Reset!"><img border="0" src="http://2.bp.blogspot.com/_2xKZgKYJlJs/S1jGI50wiwI/AAAAAAAAAX4/oKJTzLOx2bI/s320/esx-password3.png" /></a>        </div><li>Once you have entered your new root password, reboot the ESX server with the <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">reboot </span>command:</li><div class="separator" style="clear: both; text-align: center;"><a alt="Reboot ESX" href="http://3.bp.blogspot.com/_2xKZgKYJlJs/S1jGp7ltnRI/AAAAAAAAAYA/P3C3DOIUvQg/s1600-h/esx-password4.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" title="Reboot ESX"><img border="0" src="http://3.bp.blogspot.com/_2xKZgKYJlJs/S1jGp7ltnRI/AAAAAAAAAYA/P3C3DOIUvQg/s320/esx-password4.png" /></a>       </div><li>Allow the ESX server to reboot as normal.&nbsp; Double check your new root user password works as expected, bring up any shut down Virtual Machines.</li></ol>Job Done!<br /><br />Although I have used ESX 3.5 in the screenshots, this procedure also works for ESX 4.<br /><br /><i>Isn't this a "back door" into ESX?&nbsp; </i><i>Is this procedure really a legitimate way to reset root passwords?</i>&nbsp; No, it's not a back door!&nbsp; Honest Guv'nor!<br /><br />As for legitimacy, see this <a href="http://kb.vmware.com/kb/1317898" target="_blank">VMware knowledgebase article</a><br /><br />Thanks go to Martin for calling this afternoon and asking how this is done - before you called I always wondered...&nbsp; Now we know!<br /><br />- Chris<div class="blogger-post-footer"><p>

