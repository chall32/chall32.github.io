---
layout: post
title: ! 'VMware ESX 4: Install From USB'
date: '2009-11-24T21:41:00.014Z'
tags:
- USB
- ESXi
- VMware
- ESX
modified_time: '2010-10-28T21:31:05.624+01:00'
thumbnail: http://4.bp.blogspot.com/_2xKZgKYJlJs/SwxU44-6EzI/AAAAAAAAAUM/BnB-lt732XY/s72-c/esxusb.png
blogger_id: tag:blogger.com,1999:blog-1308168280960455064.post-2026584783585711795
blogger_orig_url: http://chall32.blogspot.com/2009/11/vmware-esx-4-install-from-usb.html
---

<div class="separator" style="clear: both; text-align: center;"><a alt="VMWare ESX 4 Installation USB Stick" href="http://4.bp.blogspot.com/_2xKZgKYJlJs/SwxU44-6EzI/AAAAAAAAAUM/BnB-lt732XY/s1600/esxusb.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;" title="VMWare ESX 4 Installation USB Stick"><img border="0" src="http://4.bp.blogspot.com/_2xKZgKYJlJs/SwxU44-6EzI/AAAAAAAAAUM/BnB-lt732XY/s200/esxusb.png" /></a></div><br /><br />This took a bit of searching and a fair bit of trial and error, but here it is, how to install VMware ESX from a USB stick.<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><b><span style="font-size: large;">Requirements</span></b><br /><ol><li>A copy of VMware ESX 4.&nbsp; Download an evaluation copy from <a href="http://downloads.vmware.com/d/info/datacenter_downloads/vmware_vsphere_4/4" target="_blank">here</a> (free VMware logon required)</li><li>A copy of UNetbootin from <a href="http://unetbootin.sourceforge.net/" target="_blank">here</a>.  UNetbootin allows you to create bootable Live USB drives for a variety of Linux distributions including VMware ESX 4.</li><li> A USB stick.&nbsp; Nothing special is required here, for example I've got a couple of really cheap 1Gb sticks that work just fine.</li></ol><br /><span style="font-size: large;"><b>How To</b></span><br /><ol><li>Format your USB stick using Windows format.&nbsp; FAT32 file system is fine:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a alt="Format USB Stick - FAT32 is fine" href="http://4.bp.blogspot.com/_2xKZgKYJlJs/SwxNDh2nvbI/AAAAAAAAAT8/BuEm42hfB18/s1600/format.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" title="Format USB Stick - FAT32 is fine"><img border="0" src="http://4.bp.blogspot.com/_2xKZgKYJlJs/SwxNDh2nvbI/AAAAAAAAAT8/BuEm42hfB18/s200/format.png" /></a></div></li><li>Once format is complete, leave USB stick plugged in and start UNetbootin:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a alt="UNetbootin dialogue" href="http://1.bp.blogspot.com/_2xKZgKYJlJs/SwxNoYPxNzI/AAAAAAAAAUE/UHsNNLjOpks/s1600/unetbootin.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;" title="UNetbootin dialogue"><img border="0" src="http://1.bp.blogspot.com/_2xKZgKYJlJs/SwxNoYPxNzI/AAAAAAAAAUE/UHsNNLjOpks/s200/unetbootin.png" /></a></div></li><li>Select "Diskimage" and locate your ESX 4 iso file.</li><li> Select your USB drive.</li><li>Click OK and let UNetbootin extract and copy the ESX 4 installation and boot sector files on the USB</li><li>Close UNetbootin and open USB stick in Windows Explorer</li><li>Open the file syslinux.cfg (located in the root of the USB) with <b>Wordpad </b>- NOT Notepad</li><li>Add <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">askmedia</span> to the end of each text section.&nbsp; For example:</li></ol><blockquote style="font-family: Times,&quot;Times New Roman&quot;,serif;"><span style="font-size: x-small;">label ubnentry0<br />menu label Install ESX in graphical mode<br />kernel /isolinux/vmlinuz<br />append initrd=/isolinux/initrd.img vmkopts=debugLogToSerial:1 mem=512M quiet </span></blockquote><br />becomes:<br /><br /><blockquote style="font-family: Times,&quot;Times New Roman&quot;,serif;"><span style="font-size: x-small;">label ubnentry0<br />menu label Install ESX in graphical mode<br />kernel /isolinux/vmlinuz<br />append initrd=/isolinux/initrd.img vmkopts=debugLogToSerial:1 mem=512M quiet <b>askmedia</b></span></blockquote><br />Or alternatively replace the complete contents of syslinux.cfg with this:<br /><br /><blockquote style="font-family: Times,&quot;Times New Roman&quot;,serif;"><span style="font-size: x-small;">default vesamenu.c32<br />prompt 0<br />menu title CH ESX4 Update 1 USB<br />timeout 100<br /><br />label unetbootindefault<br />menu label Install ESX in graphical mode<br />kernel /isolinux/vmlinuz<br />append initrd=/isolinux/initrd.img vmkopts=debugLogToSerial:1 mem=512M quiet askmedia<br /><br />label ubnentry0<br />menu label Install ESX in text mode<br />kernel /isolinux/vmlinuz<br />append initrd=/isolinux/initrd.img vmkopts=debugLogToSerial:1 mem=512M text quiet askmedia<br /><br />label ubnentry1<br />menu label ESX Scripted Install using USB ks.cfg<br />kernel /isolinux/vmlinuz<br />append initrd=/isolinux/initrd.img vmkopts=debugLogToSerial:1 mem=512M ks=usb quiet<br /><br />label ubnentry2<br />menu label ESX Scripted Install to first disk<br />kernel /isolinux/vmlinuz<br />append initrd=/isolinux/initrd.img vmkopts=debugLogToSerial:1 mem=512M ks=file:///usr/lib/vmware/weasel/examples/ks-first-safe.cfg quiet<br /><br />label ubnentry3<br />menu label ESX Scripted Install to first disk (overwrite VMFS)<br />kernel /isolinux/vmlinuz<br />append initrd=/isolinux/initrd.img vmkopts=debugLogToSerial:1 mem=512M ks=file:///usr/lib/vmware/weasel/examples/ks-first.cfg quiet<br /><br />label ubnentry4<br />menu label ^Boot from first hard disk<br />kernel /ubnkern<br />append initrd=/ubninit </span></blockquote><br />As you can see from the above, I've tweaked the boot menu to A) remove the "Default" entry B) Add a personalised boot menu title.<br /><br />Save syslinux.cfg file back onto the USB and eject.<br /><br />Easy and ESX installation is a lot quicker too!<br /><br />- Chris<div class="blogger-post-footer"><p>

